(function(b,a,d,f){new (a.Router.extend({routes:{"feed/:id":"feed"},feed:function(c){b.getJSON("/feed/"+c,function(c){var a=new g;a.reset(c.Feed.Items);new h({collection:a})})}}));a.history.start({pushState:!0});a.sync=function(c,a,b){b()};var e=a.Model.extend({}),g=a.Collection.extend({model:e}),e=a.Model.extend({}),i=a.Collection.extend({model:e}),j=a.View.extend({initialize:function(){d.bindAll(this,"render")},render:function(){this.el=Handlebars.compile(b("#feed-item-tmpl").html())(this.model.toJSON());
return this}}),h=a.View.extend({el:b("#content"),initialize:function(){d.bindAll(this,"render","appendFeedItem");this.collection.bind("add",this.appendFeedItem);this.counter=0;this.render()},render:function(){var c=this;b(this.el).html("");d(this.collection.models).each(function(a){c.appendFeedItem(a)},this)},appendFeedItem:function(c){c=new j({model:c});b(this.el).append(c.render().el)}}),k=a.View.extend({initialize:function(){d.bindAll(this,"render")},render:function(){this.el=Handlebars.compile(b("#feed-tmpl").html())(this.model.toJSON());
return this}}),l=a.View.extend({el:b("#leftnav ul"),initialize:function(){d.bindAll(this,"render","appendFeed");this.collection.bind("add",this.appendFeed);this.render()},render:function(){var c=this;d(this.collection.models).each(function(a){c.appendFeed(a)},this)},appendFeed:function(a){a=new k({model:a});b(this.el).append(a.render().el)}});b.getJSON("/feeds/1",function(a){var b=new i;b.reset(a);new l({collection:b})});b(f).on("click","a:not([data-bypass])",function(c){var d=b(this).attr("href"),
e=this.protocol+"//";d&&(d.slice(0,e.length)!==e&&0!==d.indexOf("javascript:"))&&(c.preventDefault(),a.history.navigate(d,!0))})})(jQuery,Backbone,_,document,window);
