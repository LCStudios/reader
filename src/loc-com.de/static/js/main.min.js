(function(a,c,d,g){new (c.Router.extend({routes:{"feed/:id":"feed"},feed:function(b){a.getJSON("/feed/"+b,function(b){var a=new h;a.reset(b.Feed.Items);new i({collection:a})})}}));c.history.start({pushState:!0});var e=c.Model.extend({}),h=c.Collection.extend({model:e}),e=c.Model.extend({url:"/feed/"}),j=c.Collection.extend({model:e}),k=c.View.extend({initialize:function(){d.bindAll(this,"render");this.feedItemTmpl=Handlebars.compile(a("#feed-item-tmpl").html())},render:function(){this.el=this.feedItemTmpl(this.model.toJSON());
return this}}),i=c.View.extend({el:a("#content"),initialize:function(){d.bindAll(this,"render","appendFeedItem");this.collection.bind("add",this.appendFeedItem);this.counter=0;this.render()},render:function(){var b=this;a(this.el).html("");d(this.collection.models).each(function(a){b.appendFeedItem(a)},this)},appendFeedItem:function(b){b=new k({model:b});a(this.el).append(b.render().el)}}),l=c.View.extend({initialize:function(){d.bindAll(this,"render");this.feedTmpl=Handlebars.compile(a("#feed-tmpl").html())},
render:function(){this.el=this.feedTmpl(this.model.toJSON());return this}}),m=c.View.extend({el:a("#leftnav ul"),events:{"click #addfeed":"addFeedDialog"},initialize:function(){d.bindAll(this,"render","appendFeed","addFeed","addFeedDialog");this.collection.bind("add",this.appendFeed);this.render()},render:function(){var b=this;d(this.collection.models).each(function(a){b.appendFeed(a)},this)},appendFeed:function(b){b=new l({model:b});a(this.el).append(b.render().el)},addFeedDialog:function(){a("#add-feed-dialog").dialog("show")},
addFeed:function(a){this.collection.create({url:a},{wait:!0})}}),f;a.getJSON("/feeds/1",function(a){var c=new j;c.reset(a);f=new m({collection:c})});a("#add-feed-dialog").dialog({title:"Feed hinzuf\u00fcgen",submit:function(){f.addFeed(a("#add-feed-url").val())}});a(g).on("click","a:not([data-bypass])",function(b){var d=a(this).attr("href"),e=this.protocol+"//";d&&(d.slice(0,e.length)!==e&&0!==d.indexOf("javascript:"))&&(b.preventDefault(),c.history.navigate(d,!0))})})(jQuery,Backbone,_,document,
window);
